DROP DATABASE IF EXISTS test_db_months_between;
Warnings:
Note	1008	Can't drop database 'test_db_months_between'; database doesn't exist
CREATE DATABASE test_db_months_between;
USE test_db_months_between;
CREATE TABLE testtb (id INT PRIMARY KEY, t DATE);
INSERT INTO testtb VALUES (1,'2020-01-01');
INSERT INTO testtb VALUES (2,'2020-06-08');
CREATE TABLE testtb2 (id INT PRIMARY KEY, t DATETIME);
INSERT INTO testtb2 VALUES (1,'2020-01-01 13:00:49');
INSERT INTO testtb2 VALUES (2,'2020-06-08 19:01:00');
CREATE TABLE testtb3 (id INT PRIMARY KEY, t DOUBLE);
SELECT MONTHS_BETWEEN((SELECT T FROM testtb WHERE id = 1), (SELECT T FROM testtb WHERE id = 2));
MONTHS_BETWEEN((SELECT T FROM testtb WHERE id = 1), (SELECT T FROM testtb WHERE id = 2))
-5.2258064516
SELECT MONTHS_BETWEEN((SELECT T FROM testtb WHERE id = 2), (SELECT T FROM testtb WHERE id = 1));
MONTHS_BETWEEN((SELECT T FROM testtb WHERE id = 2), (SELECT T FROM testtb WHERE id = 1))
5.2258064516
SELECT MONTHS_BETWEEN((SELECT T FROM testtb2 WHERE id = 1), (SELECT T FROM testtb2 WHERE id = 2));
MONTHS_BETWEEN((SELECT T FROM testtb2 WHERE id = 1), (SELECT T FROM testtb2 WHERE id = 2))
-5.2338750747
SELECT MONTHS_BETWEEN((SELECT T FROM testtb2 WHERE id = 2), (SELECT T FROM testtb2 WHERE id = 1));
MONTHS_BETWEEN((SELECT T FROM testtb2 WHERE id = 2), (SELECT T FROM testtb2 WHERE id = 1))
5.2338750747
SELECT MONTHS_BETWEEN(NOW(),CURDATE());
MONTHS_BETWEEN(NOW(),CURDATE())
0
SELECT MONTHS_BETWEEN('2020-06-07','2020-06-06')+1;
MONTHS_BETWEEN('2020-06-07','2020-06-06')+1
1.0322580645
INSERT INTO testtb3 VALUES (1,MONTHS_BETWEEN('2020-06-08 23:00:00','2019-06-09 15:24:00'));
INSERT INTO testtb3 VALUES (2,MONTHS_BETWEEN('2020-06-08 23:00:00','2020-06-01 15:24:00'));
SELECT * FROM testtb3;
id	t
1	11.9779569892
2	0.2360215054
SELECT * FROM testtb3 WHERE t = MONTHS_BETWEEN('2020-06-08 23:00:00','2019-06-09 15:24:00');
id	t
1	11.9779569892
UPDATE testtb3 SET t = MONTHS_BETWEEN('2020-06-08 23:00:00','2020-06-08 15:24:00') WHERE id = 2;
UPDATE testtb3 SET t = MONTHS_BETWEEN('2020-06-08 23:00:00','2020-06-03 15:24:00') WHERE t = MONTHS_BETWEEN('2020-06-08 23:00:00','2019-06-09 15:24:00');
SELECT * FROM testtb3;
id	t
1	0.1715053763
2	0
DELETE FROM testtb3 WHERE t = MONTHS_BETWEEN('2020-06-08 23:00:00','2020-06-08 15:24:00');
SELECT * FROM testtb3;
id	t
1	0.1715053763
SELECT MONTHS_BETWEEN(TO_DATE('02-01-1999','MM-DD-YYYY'),TO_DATE('02-01-1998','MM-DD-YYYY'));
MONTHS_BETWEEN(TO_DATE('02-01-1999','MM-DD-YYYY'),TO_DATE('02-01-1998','MM-DD-YYYY'))
12
SELECT MONTHS_BETWEEN(TO_DATE('04-21-1999','MM-DD-YYYY'),TO_DATE('07-31-2020','MM-DD-YYYY'));
MONTHS_BETWEEN(TO_DATE('04-21-1999','MM-DD-YYYY'),TO_DATE('07-31-2020','MM-DD-YYYY'))
-255.3225806452
SELECT MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-05-21 20:00:03', 'YYYY-MM-DD HH24:MI:SS'));
MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-05-21 20:00:03', 'YYYY-MM-DD HH24:MI:SS'))
12.5113971027
SELECT MONTHS_BETWEEN(TO_DATE('2019-05-21 20:00:03', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'));
MONTHS_BETWEEN(TO_DATE('2019-05-21 20:00:03', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'))
-12.5113971027
SELECT MONTHS_BETWEEN(20200630,20190201);
MONTHS_BETWEEN(20200630,20190201)
16.935483871
SELECT MONTHS_BETWEEN(20190201,20200630);
MONTHS_BETWEEN(20190201,20200630)
-16.935483871
SELECT MONTHS_BETWEEN('2020-06-08 23:00:00','2019-02-02 23:00:00');
MONTHS_BETWEEN('2020-06-08 23:00:00','2019-02-02 23:00:00')
16.1935483871
SELECT MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:00:00');
MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:00:00')
-16.1935483871
SELECT MONTHS_BETWEEN('2020-06-08 23:00:00','2019-06-08 23:00:00');
MONTHS_BETWEEN('2020-06-08 23:00:00','2019-06-08 23:00:00')
12
SELECT MONTHS_BETWEEN('2020-06-08 23:00:01','2019-02-02 23:00:00');
MONTHS_BETWEEN('2020-06-08 23:00:01','2019-02-02 23:00:00')
16.1935487605
SELECT MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:00:01');
MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:00:01')
-16.1935487605
SELECT MONTHS_BETWEEN('2020-06-08 23:01:00','2019-02-02 23:00:00');
MONTHS_BETWEEN('2020-06-08 23:01:00','2019-02-02 23:00:00')
16.1935707885
SELECT MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:01:00');
MONTHS_BETWEEN('2019-02-02 23:00:00','2020-06-08 23:01:00')
-16.1935707885
SELECT MONTHS_BETWEEN('2020-06-08 22:00:00','2019-02-02 23:00:00');
MONTHS_BETWEEN('2020-06-08 22:00:00','2019-02-02 23:00:00')
16.1922043011
SELECT MONTHS_BETWEEN('2019-02-02 22:00:00','2020-06-08 23:00:00');
MONTHS_BETWEEN('2019-02-02 22:00:00','2020-06-08 23:00:00')
-16.1948924731
SELECT MONTHS_BETWEEN('2020-06-08','2020-06-09');
MONTHS_BETWEEN('2020-06-08','2020-06-09')
-0.0322580645
SELECT MONTHS_BETWEEN('2020-06-09','2020-06-08');
MONTHS_BETWEEN('2020-06-09','2020-06-08')
0.0322580645
SELECT MONTHS_BETWEEN('2020-06-08','2020-07-08');
MONTHS_BETWEEN('2020-06-08','2020-07-08')
-1
SELECT MONTHS_BETWEEN('2020-07-08','2020-06-08');
MONTHS_BETWEEN('2020-07-08','2020-06-08')
1
SELECT MONTHS_BETWEEN('2020-06-08','2021-06-08');
MONTHS_BETWEEN('2020-06-08','2021-06-08')
-12
SELECT MONTHS_BETWEEN('2021-06-08','2020-06-08');
MONTHS_BETWEEN('2021-06-08','2020-06-08')
12
SELECT MONTHS_BETWEEN('9999-12-31 23:59:59','1000-01-01 00:00:00');
MONTHS_BETWEEN('9999-12-31 23:59:59','1000-01-01 00:00:00')
107999.9999996266
SELECT MONTHS_BETWEEN('1000-01-01 00:00:00','9999-12-31 23:59:59');
MONTHS_BETWEEN('1000-01-01 00:00:00','9999-12-31 23:59:59')
-107999.9999996266
SELECT MONTHS_BETWEEN('9999-12-31 23:59:59','0001-01-01 00:00:00');
MONTHS_BETWEEN('9999-12-31 23:59:59','0001-01-01 00:00:00')
119987.9999996267
SELECT MONTHS_BETWEEN('0001-01-01 00:00:00','9999-12-31 23:59:59');
MONTHS_BETWEEN('0001-01-01 00:00:00','9999-12-31 23:59:59')
-119987.9999996267
SELECT MONTHS_BETWEEN('2020-12-02 00:00:00','2020-01-02 23:59:59');
MONTHS_BETWEEN('2020-12-02 00:00:00','2020-01-02 23:59:59')
11
SELECT MONTHS_BETWEEN('2020-01-02 00:00:00','2020-12-02 23:59:59');
MONTHS_BETWEEN('2020-01-02 00:00:00','2020-12-02 23:59:59')
-11
SELECT MONTHS_BETWEEN('2020-01-02','1999-01-02');
MONTHS_BETWEEN('2020-01-02','1999-01-02')
252
SELECT MONTHS_BETWEEN('1999-01-02','2020-01-02');
MONTHS_BETWEEN('1999-01-02','2020-01-02')
-252
SELECT MONTHS_BETWEEN('2020-05-02 23:59:59','1999-01-02 00:00:00');
MONTHS_BETWEEN('2020-05-02 23:59:59','1999-01-02 00:00:00')
256
SELECT MONTHS_BETWEEN('1999-01-02 00:00:00','2020-05-02 23:59:59');
MONTHS_BETWEEN('1999-01-02 00:00:00','2020-05-02 23:59:59')
-256
SELECT MONTHS_BETWEEN('2020-03-02','1999-10-02');
MONTHS_BETWEEN('2020-03-02','1999-10-02')
245
SELECT MONTHS_BETWEEN('1999-10-02','2020-03-02');
MONTHS_BETWEEN('1999-10-02','2020-03-02')
-245
SELECT MONTHS_BETWEEN('2020-05-31 12:00:00','1999-04-30 00:00:00');
MONTHS_BETWEEN('2020-05-31 12:00:00','1999-04-30 00:00:00')
253
SELECT MONTHS_BETWEEN('1999-04-30 00:00:00','2020-05-31 12:00:00');
MONTHS_BETWEEN('1999-04-30 00:00:00','2020-05-31 12:00:00')
-253
SELECT MONTHS_BETWEEN('2020-02-29 23:59:59','2019-02-28 00:00:00');
MONTHS_BETWEEN('2020-02-29 23:59:59','2019-02-28 00:00:00')
12
SELECT MONTHS_BETWEEN('2019-02-28 00:00:00','2020-02-29 23:59:59');
MONTHS_BETWEEN('2019-02-28 00:00:00','2020-02-29 23:59:59')
-12
SELECT MONTHS_BETWEEN('2020-05-02','1999-01-02');
MONTHS_BETWEEN('2020-05-02','1999-01-02')
256
SELECT MONTHS_BETWEEN('1999-01-02','2020-05-02');
MONTHS_BETWEEN('1999-01-02','2020-05-02')
-256
SELECT MONTHS_BETWEEN('2020-03-02','1999-10-02');
MONTHS_BETWEEN('2020-03-02','1999-10-02')
245
SELECT MONTHS_BETWEEN('1999-10-02','2020-03-02');
MONTHS_BETWEEN('1999-10-02','2020-03-02')
-245
SELECT MONTHS_BETWEEN('2020-05-29 12:24:32','1999-04-30 05:04:57');
MONTHS_BETWEEN('2020-05-29 12:24:32','1999-04-30 05:04:57')
252.9775892324
SELECT MONTHS_BETWEEN('1999-04-30 05:04:57','2020-05-29 12:24:32');
MONTHS_BETWEEN('1999-04-30 05:04:57','2020-05-29 12:24:32')
-252.9775892324
SELECT MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-5-6', 'yyyy-mm-dd'));
MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-5-6', 'yyyy-mm-dd'))
13
SELECT MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-5-7', 'yyyy-mm-dd'));
MONTHS_BETWEEN(TO_DATE('2020-06-06 16:28:49', 'YYYY-MM-DD HH24:MI:SS'), TO_DATE('2019-5-7', 'yyyy-mm-dd'))
12.9898928465
PREPARE stmt_months_between FROM 'SELECT MONTHS_BETWEEN(20200529,20100430) WHERE MONTHS_BETWEEN(20200529,20100430) > ?';
SET @a = 100;
EXECUTE stmt_months_between USING @a;
MONTHS_BETWEEN(20200529,20100430)
120.9677419355
CREATE OR REPLACE PROCEDURE select_m_b()
BEGIN
DECLARE t INT DEFAULT 1;
WHILE t < 3 DO
SELECT MONTHS_BETWEEN('2020-06-09 10:45:59','2020-05-29 17:54:17');
SET t = t + 1;
END WHILE;
END $$
CALL select_m_b();
MONTHS_BETWEEN('2020-06-09 10:45:59','2020-05-29 17:54:17')
0.3452441756
MONTHS_BETWEEN('2020-06-09 10:45:59','2020-05-29 17:54:17')
0.3452441756
SELECT MONTHS_BETWEEN('9999-12-31 23:59:59','0000-01-01 00:00:00');
ERROR HY000: calculate MONTHS_BETWEEN fail: year must be between 1 and 9999
SELECT MONTHS_BETWEEN('0000-01-01 00:00:00','9999-12-31 23:59:59');
ERROR HY000: calculate MONTHS_BETWEEN fail: year must be between 1 and 9999
SELECT MONTHS_BETWEEN('10000-01-02','1999-01-02');
ERROR HY000: calculate MONTHS_BETWEEN fail: cannot convert parameters to date
SELECT MONTHS_BETWEEN('1999-01-02','2020-28-02');
ERROR HY000: calculate MONTHS_BETWEEN fail: cannot convert parameters to date
SELECT MONTHS_BETWEEN(NULL,'1999-01-02');
ERROR HY000: calculate MONTHS_BETWEEN fail: cannot convert parameters to date
SELECT MONTHS_BETWEEN(TO_DATE(NULL,'YYYY-MM-DD'),'1999-01-02');
ERROR HY000: calculate MONTHS_BETWEEN fail: cannot convert parameters to date
SELECT MONTHS_BETWEEN(NULL,NULL);
ERROR HY000: calculate MONTHS_BETWEEN fail: cannot convert parameters to date
DROP DATABASE IF EXISTS test_db_months_between;
